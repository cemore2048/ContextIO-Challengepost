<!doctype html>
<html>

<head>
	<title> </title>
	<script src="/d3.min.js" type="text/javascript"></script>
	<script src="/jquery-2.1.4.js"></script>


	<script>
	var data;
	//while it keeps getting the limit, keep sending request
	//with offset increasing by 100
	var count = 0;
	var count2 = 0;
	var offset = 0;
	var keepGoing = true;
	$(document).ready(function() {
		$('button').click(function() {
			while(count2 != 5){
				d3.json("/api/messages/" + offset, function(error, json) {
					if (error) return console.warn(error);
					data = json;
					for(var i = 0; i < data.messages.length; i++){
						console.log(data.messages[i].date);

					}
				});
				console.log("offset is : " + offset);
				count2++;
				offset += 100;

			}
		});
	});


	</script>
</head>
<body>
		<button>Send an HTTP GET request to a page and get the result back</button>
</body>
<html>
